# 🚀 Deployment Guide - Render Platform

This guide will help you deploy your Chat Ting Ting App to Render.

## 📋 Prerequisites

Before deploying, make sure you have:

1. **GitHub Repository** - Your code should be pushed to GitHub
2. **MongoDB Atlas Account** - For the database (free tier available)
3. **Render Account** - Sign up at [render.com](https://render.com) (free tier available)
4. **Cloudinary Account** (Optional) - For image uploads

## 🗄️ Step 1: Setup MongoDB Atlas

1. Go to [MongoDB Atlas](https://www.mongodb.com/atlas)
2. Create a free account and cluster
3. Go to **Database Access** → Add a new database user
4. Go to **Network Access** → Add IP address `0.0.0.0/0` (allow from anywhere)
5. Go to **Database** → Connect → Get your connection string
6. Save the connection string - you'll need it later

Example: `mongodb+srv://username:password@cluster.mongodb.net/chat-app`

## ☁️ Step 2: Setup Cloudinary (Optional)

If you want image upload functionality:

1. Go to [Cloudinary](https://cloudinary.com)
2. Create a free account
3. Go to **Dashboard** and copy:
   - Cloud Name
   - API Key
   - API Secret

## 🚀 Step 3: Deploy to Render

### Option A: Using render.yaml (Recommended)

1. **Push your code to GitHub** with the `render.yaml` file included

2. **Create a new Web Service on Render:**
   - Go to [Render Dashboard](https://dashboard.render.com)
   - Click **"New"** → **"Web Service"**
   - Connect your GitHub repository
   - Render will automatically detect the `render.yaml` file

3. **Configure Environment Variables:**
   Render will prompt you to add these required variables:
   
   ```bash
   MONGODB_URL=mongodb+srv://username:password@cluster.mongodb.net/chat-app
   ```
   
   Optional variables (for image uploads):
   ```bash
   CLOUDINARY_CLOUD_NAME=your-cloud-name
   CLOUDINARY_API_KEY=your-api-key
   CLOUDINARY_API_SECRET=your-api-secret
   ```

4. **Deploy:**
   - Click **"Create Web Service"**
   - Render will automatically build and deploy your app
   - The build process will take 5-10 minutes

### Option B: Manual Setup

If you prefer manual setup:

1. **Create a new Web Service:**
   - Repository: Your GitHub repo
   - Branch: `main`
   - Root Directory: `. ` (leave empty or put a dot)
   - Environment: `Node`
   - Build Command: `npm run build`
   - Start Command: `npm start`

2. **Add Environment Variables** (same as above)

3. **Deploy**

## 🔧 Step 4: Post-Deployment Configuration

1. **Update CORS Configuration:**
   After your app is deployed, you'll get a URL like: `https://your-app-name.onrender.com`
   
   The app is already configured to handle this automatically!

2. **Test Your App:**
   - Visit your Render URL
   - Create an account
   - Test real-time messaging
   - Test image uploads (if configured)

## 📱 Step 5: Custom Domain (Optional)

1. Go to your service settings in Render
2. Add your custom domain
3. Update DNS records as instructed by Render

## 🛠️ Troubleshooting

### Common Issues:

1. **Build Failed:**
   - Check that all package.json files are correct
   - Ensure Node.js version compatibility
   - Check build logs for specific errors

2. **App Not Loading:**
   - Verify environment variables are set correctly
   - Check if MongoDB connection string is valid
   - Look at the application logs in Render dashboard

3. **Socket Connection Issues:**
   - The app is configured to work automatically
   - Check browser console for WebSocket errors
   - Ensure your domain is added to CORS configuration

4. **Database Connection Failed:**
   - Verify MongoDB Atlas allows connections from `0.0.0.0/0`
   - Check if the connection string includes the correct password
   - Ensure the database user has read/write permissions

### Checking Logs:

1. Go to your Render service dashboard
2. Click on **"Logs"** tab
3. Look for error messages and stack traces

## 🎯 Environment Variables Reference

| Variable | Required | Description | Example |
|----------|----------|-------------|---------|
| `NODE_ENV` | ✅ | Environment mode | `production` |
| `MONGODB_URL` | ✅ | MongoDB connection string | `mongodb+srv://user:pass@cluster.mongodb.net/chat-app` |
| `JWT_SECRET` | ✅ | Secret for JWT tokens | Auto-generated by Render |
| `CLOUDINARY_CLOUD_NAME` | ❌ | Cloudinary cloud name | `your-cloud-name` |
| `CLOUDINARY_API_KEY` | ❌ | Cloudinary API key | `123456789012345` |
| `CLOUDINARY_API_SECRET` | ❌ | Cloudinary API secret | `your-api-secret` |

## 🔄 Updating Your App

To update your deployed app:

1. Push changes to your GitHub repository
2. Render will automatically detect changes and redeploy
3. Check the deployment logs to ensure success

## 💡 Tips for Better Performance

1. **Use MongoDB Atlas in the same region** as your Render service
2. **Enable MongoDB connection pooling** (already configured)
3. **Monitor your app** using Render's built-in metrics
4. **Use Render's free SSL** (automatically enabled)

## 🎉 Success!

Once deployed, your chat app will be live at: `https://your-app-name.onrender.com`

Features that work out of the box:
- ✅ Real-time messaging
- ✅ User authentication
- ✅ Online status indicators
- ✅ Responsive design
- ✅ Image uploads (if Cloudinary is configured)
- ✅ Emoji support
- ✅ Dark/Light theme

---

**Need Help?** 
- Check the [Render Documentation](https://render.com/docs)
- Review your service logs in the Render dashboard
- Ensure all environment variables are correctly set